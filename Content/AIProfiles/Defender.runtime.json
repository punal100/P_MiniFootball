{
  "name": "Defender",
  "initialState": "Main",
  "blackboard": [
    {
      "key": "HasBall",
      "value": {
        "type": "Bool",
        "rawValue": "false"
      }
    },
    {
      "key": "Role",
      "value": {
        "type": "String",
        "rawValue": "Defender"
      }
    },
    {
      "key": "TeamID",
      "value": {
        "type": "Float",
        "rawValue": "0"
      }
    }
  ],
  "states": [
    {
      "id": "Main",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Defender AI Active\" }"
        }
      ],
      "onTick": [],
      "onExit": [],
      "transitions": [
        {
          "to": "ChaseBall",
          "priority": 875,
          "condition": {
            "type": "And",
            "conditions": [
              {
                "type": "Blackboard",
                "keyOrName": "MatchIsPlaying",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "HasBall",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "false"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "IsBallLoose",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "DistToBall",
                "op": "LessThan",
                "compareValue": {
                  "type": "Float",
                  "rawValue": "2000.0"
                }
              }
            ]
          }
        },
        {
          "to": "ClearBall",
          "priority": 1000,
          "condition": {
            "type": "And",
            "conditions": [
              {
                "type": "Blackboard",
                "keyOrName": "HasBall",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "IsInDanger",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              }
            ]
          }
        },
        {
          "to": "PassForward",
          "priority": 900,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Tackle",
          "priority": 800,
          "condition": {
            "type": "And",
            "conditions": [
              {
                "type": "Blackboard",
                "keyOrName": "MatchIsPlaying",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "OpponentHasBall",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "DistToBall",
                "op": "LessThan",
                "compareValue": {
                  "type": "Float",
                  "rawValue": "240.0"
                }
              }
            ]
          }
        },
        {
          "to": "PressBall",
          "priority": 750,
          "condition": {
            "type": "And",
            "conditions": [
              {
                "type": "Blackboard",
                "keyOrName": "MatchIsPlaying",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "HasBall",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "false"
                }
              },
              {
                "type": "Or",
                "conditions": [
                  {
                    "type": "Blackboard",
                    "keyOrName": "AmIClosestToBall",
                    "op": "Equal",
                    "compareValue": {
                      "type": "Bool",
                      "rawValue": "true"
                    }
                  },
                  {
                    "type": "Blackboard",
                    "keyOrName": "DistToBall",
                    "op": "LessThan",
                    "compareValue": {
                      "type": "Float",
                      "rawValue": "1000.0"
                    }
                  }
                ]
              }
            ]
          }
        },
        {
          "to": "SupportDefense",
          "priority": 725,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "OpponentHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "ChaseBall",
          "priority": 700,
          "condition": {
            "type": "And",
            "conditions": [
              {
                "type": "Blackboard",
                "keyOrName": "HasBall",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "false"
                }
              },
              {
                "type": "Blackboard",
                "keyOrName": "IsBallInPlay",
                "op": "Equal",
                "compareValue": {
                  "type": "Bool",
                  "rawValue": "true"
                }
              },
              {
                "type": "Or",
                "conditions": [
                  {
                    "type": "Blackboard",
                    "keyOrName": "AmIClosestToBall",
                    "op": "Equal",
                    "compareValue": {
                      "type": "Bool",
                      "rawValue": "true"
                    }
                  },
                  {
                    "type": "Blackboard",
                    "keyOrName": "DistToBall",
                    "op": "LessThan",
                    "compareValue": {
                      "type": "Float",
                      "rawValue": "1000.0"
                    }
                  }
                ]
              }
            ]
          }
        },
        {
          "to": "DribbleToGoal",
          "priority": 650,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "MarkOpponent",
          "priority": 600,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "OpponentHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "CoverGoal",
          "priority": 500,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "TeamHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        },
        {
          "to": "SupportAttack",
          "priority": 400,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "TeamHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "ReturnHome",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToSupportPosition",
            "op": "GreaterThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "100.0"
            }
          }
        }
      ]
    },
    {
      "id": "ClearBall",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Clearing ball!\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Shoot\", \"params\": { \"power\": 1.0, \"target\": \"Goal_Opponent\" } }"
        }
      ],
      "onTick": [],
      "onExit": [],
      "transitions": [
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Timer",
            "seconds": 0.5
          }
        }
      ]
    },
    {
      "id": "PassForward",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Passing to Striker!\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Pass\", \"params\": { \"target\": \"Striker\", \"power\": 0.8 } }"
        }
      ],
      "onTick": [],
      "onExit": [],
      "transitions": [
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Timer",
            "seconds": 0.3
          }
        }
      ]
    },
    {
      "id": "Tackle",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Tackling!\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Face\", \"params\": { \"target\": \"BallCarrier\" } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"BallCarrierIntercept\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Face\", \"params\": { \"target\": \"BallCarrier\" } }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Tackle\" }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Timer",
            "seconds": 0.5
          }
        }
      ]
    },
    {
      "id": "PressBall",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Pressing ball carrier!\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"BallCarrierIntercept\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Face\", \"params\": { \"target\": \"BallCarrier\" } }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Tackle",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToBall",
            "op": "LessThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "240.0"
            }
          }
        },
        {
          "to": "Main",
          "priority": 50,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "AmIClosestToBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        }
      ]
    },
    {
      "id": "ChaseBall",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Chasing ball\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"Ball\" }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Main",
          "priority": 50,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "AmIClosestToBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        }
      ]
    },
    {
      "id": "SupportDefense",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Holding Defensive Line\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"SupportPosition\" }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Main",
          "priority": 1000,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Tackle",
          "priority": 300,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToBall",
            "op": "LessThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "450.0"
            }
          }
        },
        {
          "to": "PressBall",
          "priority": 200,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "AmIClosestToBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "OpponentHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        }
      ]
    },
    {
      "id": "MarkOpponent",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Marking opponent\" }"
        }
      ],
      "onTick": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Mark\" }"
        }
      ],
      "onExit": [],
      "transitions": [
        {
          "to": "Main",
          "priority": 1000,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Tackle",
          "priority": 200,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToBall",
            "op": "LessThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "450.0"
            }
          }
        },
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "OpponentHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        }
      ]
    },
    {
      "id": "CoverGoal",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Covering goal\" }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"SupportPosition\" }"
        }
      ],
      "onExit": [],
      "transitions": [
        {
          "to": "Main",
          "priority": 1000,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToSupportPosition",
            "op": "LessThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "100.0"
            }
          }
        }
      ]
    },
    {
      "id": "SupportAttack",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Supporting attack\" }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"SupportPosition\" }"
        }
      ],
      "onExit": [],
      "transitions": [
        {
          "to": "Main",
          "priority": 1000,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "TeamHasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        }
      ]
    },
    {
      "id": "ReturnHome",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Dropping back to defend\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"SupportPosition\" }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Main",
          "priority": 1000,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        },
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "DistToSupportPosition",
            "op": "LessThan",
            "compareValue": {
              "type": "Float",
              "rawValue": "100.0"
            }
          }
        }
      ]
    },
    {
      "id": "DribbleToGoal",
      "terminal": false,
      "onEnter": [
        {
          "actionName": "Log",
          "paramsJson": "{ \"message\": \"Defender dribbling up field\" }"
        },
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": true } }"
        }
      ],
      "onTick": [
        {
          "actionName": "MoveTo",
          "paramsJson": "{ \"target\": \"Goal_Opponent\", \"acceptanceRadius\": 300 }"
        }
      ],
      "onExit": [
        {
          "actionName": "Execute",
          "paramsJson": "{ \"target\": \"MF.Sprint\", \"params\": { \"active\": false } }"
        }
      ],
      "transitions": [
        {
          "to": "Main",
          "priority": 100,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "HasBall",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "false"
            }
          }
        },
        {
          "to": "ClearBall",
          "priority": 90,
          "condition": {
            "type": "Blackboard",
            "keyOrName": "IsInDanger",
            "op": "Equal",
            "compareValue": {
              "type": "Bool",
              "rawValue": "true"
            }
          }
        }
      ]
    }
  ]
}